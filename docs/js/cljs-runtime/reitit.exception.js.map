{"version":3,"sources":["reitit/exception.cljc"],"mappings":"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","names":["var_args","G__74078","reitit.exception/fail!","js/Error","type","reitit.exception.fail_BANG_","data","cljs.core.ex_info","reitit.exception/unsupported-protocol-method!","method","reitit.exception/get-message","e","cljs.core/ex-message","js/reitit","js/reitit.exception","js/reitit.exception.format-exception","method-table__5747__auto__","cljs.core.atom","prefer-table__5748__auto__","method-cache__5749__auto__","cached-hierarchy__5750__auto__","hierarchy__5751__auto__","cljs.core.get","fexpr__74096","cljs.core/MultiFn","cljs.core.symbol","reitit.exception/format-exception","_","reitit.exception/exception","cljs.core/ex-data","message","cljs.core.assoc","or__5142__auto__","cljs.core.pr_str","conflicts","path","route-data","cljs.core/not-empty","cljs.core/select-keys","cljs.core.apply","cljs.core/str","cljs.core.mapv","p__74126","vec__74127","vec__74130","cljs.core.nth","vals","resolve-str","clojure.string.join","p__74149","vec__74150","p__74159","vec__74162","name","cljs.core/first"],"sourcesContent":["(ns reitit.exception\n  (:require [clojure.string :as str]))\n\n(defn fail!\n  ([type]\n   (fail! type nil))\n  ([type data]\n   (throw (ex-info (str type) {:type type, :data data}))))\n\n(defn unsupported-protocol-method!\n  [method]\n  (fail! :unsupported-protocol-method {:method method}))\n\n(defn get-message [e]\n  #?(:clj (.getMessage ^Exception e) :cljs (ex-message e)))\n\n(defmulti format-exception (fn [type _ _] type))\n\n(defn exception [e]\n  (let [data (ex-data e)\n        message (format-exception (:type data) (get-message e) (:data data))]\n    ;; there is a 3-arity version (+cause) of ex-info, but the default repl error message is taken from the cause\n    (ex-info message (assoc (or data {}) ::cause e))))\n\n;;\n;; Formatters\n;;\n\n(defmethod format-exception :default [_ message data]\n  (str message (if data (str \"\\n\\n\" (pr-str data)))))\n\n(defmethod format-exception :path-conflicts [_ _ conflicts]\n  (letfn [(resolve-str [path route-data]\n            (str (if (:conflicting route-data) \"   \" \"-> \")\n                 path \" \" (not-empty (select-keys route-data [:conflicting]))))]\n    (apply str \"Router contains conflicting route paths:\\n\\n\"\n           (mapv\n            (fn [[[path route-data] vals]]\n              (str (resolve-str path route-data)\n                   \"\\n\"\n                   (str/join \"\\n\" (mapv (fn [[path route-data]]\n                                          (resolve-str path route-data)) vals))\n                   \"\\n\\n\"))\n            conflicts))))\n\n(defmethod format-exception :name-conflicts [_ _ conflicts]\n  (apply str \"Router contains conflicting route names:\\n\\n\"\n         (mapv\n          (fn [[name vals]]\n            (str name \"\\n-> \" (str/join \"\\n-> \" (mapv first vals)) \"\\n\"))\n          conflicts)))\n\n(defmethod format-exception :reitit.impl/merge-data [_ _ data]\n  (str \"Error merging route-data\\n\\n\" (pr-str data)))\n"],"x_google_ignoreList":[0]}