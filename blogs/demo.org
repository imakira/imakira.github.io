#+title: Demonstration
#+TAGS: clojure lsp tailwindcss
#+CATEGORY: Coding
#+OPTIONS: tex:dvisvgm
#+ORGX: true
#+ORGX_REQUIRE: [[net.coruscation.cerulean.components :as comp]]
#+DESCRIPTION: This is a demonstration of this static blog generator
#+LATEX_HEADER: \usepackage{pgfplots}
#+LATEX_HEADER: \usepackage{svg}
#+LATEX_HEADER: \usepackage{tikz}
#+LATEX_HEADER: \usepackage{amsmath}
#+LATEX_HEADER: \usepackage{amssymb}
#+LATEX_HEADER: \usepackage{amsthm}
#+LATEX_HEADER: \usepackage{IEEEtrantools}
#+LATEX_HEADER: \usepackage{mathtools}
#+LATEX_HEADER: \usepackage{hyperref}
#+LATEX_HEADER: \usepackage{siunitx}

* Code Blocks
:PROPERTIES:
:custom_id: code-blocks
:END:

** Inline Code Block
:PROPERTIES:
:custom_id: inline-code-block
:END:

Text around src_clojure[:exports code]{(uix.dom/create-root (js/document.getElementById "root"))} the inline code block.

** Code Blocks
:PROPERTIES:
:custom_id: code-blocks3
:END:

- Java

#+BEGIN_SRC java
public static int fib(int n) { 
    if (n <= 1) {
        return n;
    }
    return fib(n - 1) + fib(n - 2);
}
#+END_SRC

- Clojure

#+BEGIN_SRC clojure
(defui app [{:keys [initial-route]}]
  (let [[show-header? set-header!]
        (use-state
         (some #(= % initial-route)
               ["/" "/home.html" "/template.html"
                "/index.html"]))]
    (context-binding [*header-context* [show-header? set-header!]]
      ($ router/router {:routes routes :initial-route initial-route}
         ($ main {})))))
#+END_SRC

- Emacs Lisp

#+BEGIN_SRC emacs-lisp
  (save-excursion                 
      (goto-char (point-min))    
#+END_SRC

#+BEGIN_SRC emacs-lisp
  (with-current-buffer (current-buffer)
    (let ((ids (org-map-entries (lambda ()
                                  (org-entry-get nil "custom_id")))))
      (org-map-entries (lambda ()
                         (when (not (org-entry-get nil "custom_id"))
                           (let* ((candidate-id (concat "blog_" (url-encode-url (nth 4 (org-heading-components)))))
                                  (duplicates (cl-count candidate-id ids)))
                             (org-entry-put nil "custom_id" (concat candidate-id
                                                                    (prin1-to-string (+ 1 duplicates))))))
                         (setq ids (cons (org-entry-get nil "custom_id")
                                         ids))))))
#+END_SRC



* H2 Sample Text
:PROPERTIES:
:custom_id: h2-sample-text
:END:

** H3 Sample Text Sample Text
:PROPERTIES:
:custom_id: h3-sample-text-sample-text
:END:

Some text in between

*** H4 Sample Text Sample Text
:PROPERTIES:
:custom_id: h4-sample-text-sample-text
:END:

Some text in between

**** H5 Sample Text Sample Text
:PROPERTIES:
:custom_id: h5-sample-text-sample-text
:END:

Some text in between


* Common Elements
:PROPERTIES:
:custom_id: common-elements
:END:

+ /italic/
+ *bold*
+ _underline_
+ =verbatim=
+ ~code~
+ +strike-through+
+ Horizontal Rule
+ ~code~
-----

* Other Elements
:PROPERTIES:
:custom_id: other-elements
:END:

** Table
:PROPERTIES:
:custom_id: table
:END:

| Name  | Phone | Age |
|-------+-------+-----|
| Peter |  1234 |  17 |
| Anna  |  4321 |  25 |

** Reference
:PROPERTIES:
:custom_id: reference
:END:

 #+BEGIN_QUOTE
 Everything should be made as simple as possible,
 but not any simpler -- Albert Einstein
 #+END_QUOTE

** Unordered List
:PROPERTIES:
:custom_id: unordered-list
:END:

+ Item 1
+ Item 2
  * Level 2
    - Level 3
      - Level 4
    - Another Mark
+ Item 3
  
**** Ordered List
:PROPERTIES:
:custom_id: ordered-list
:END:

1. Item 1
2. Item 2
3. Item 3
4. Item 4

** Description List
:PROPERTIES:
:custom_id: description-list
:END:

+ Name :: Description
  - Nested :: Nested Description
+ Name :: Description


** Sample Image
:PROPERTIES:
:custom_id: sample-image
:END:

#+CAPTION: This is an image
[[file:imgs/1.jpg]]

[[file:imgs/1.webp]]

#+CAPTION: sample high resolution vertical image
[[https://images.unsplash.com/photo-1746717410283-f4017128c38f?ixlib=rb-4.1.0&q=85&fm=jpg&crop=entropy&cs=srgb&dl=natalia-grela-sFINbLpdfqw-unsplash.jpg]]

#+CAPTION: sample high resolution horizontal iamge
[[https://images.unsplash.com/photo-1653384236127-c61634419fe0?ixlib=rb-4.1.0&q=85&fm=jpg&crop=entropy&cs=srgb&dl=johann-walter-bantz-Bp7hIvZnj9I-unsplash.jpg]]

** Verbatim
:PROPERTIES:
:custom_id: verbatim
:END:


* Inline CLJC Code
:PROPERTIES:
:custom_id: inline-cljc-code
:END:

You can embedded Clojure code inside a blog file using ~#+begin_uix~ blocks.

Enable this feature first in the org metadata:

#+begin_example
#+ORGX: true
#+end_example

With the following snippet embedded in a org file.

#+begin_example
  ,#+begin_uix
    ;; You can style it using tailwindcss
    ($ :button {:class "bg-sky-600 text-neutral-50 py-1 px-2 rounded-lg" :on-click (fn [& _] #?(:cljs (js/alert "clicked!")))} "Click Me")
  ,#+end_uix
#+end_example

We can get a clickable button in the generated page:

#+begin_uix
  ($ :button {:class "bg-sky-600 text-neutral-50 py-1 px-2 rounded-lg" :on-click (fn [& _] #?(:cljs (js/alert "clicked!")))} "Click Me")
#+end_uix


Since the code is in CLJC, this feature works very well with static page generation / server side rendering. However, you must wrap plaform specified code in read macros like we do in a normal CLJC file.

We can access the blog page's meta data using ~props~ variable.

#+begin_example
#+begin_uix
($ :div {:class "bg-stone-50 pl-4 py-2 border-l-3 border-sky-500"} (str (keys props)))
#+end_uix
#+end_example

#+begin_uix
($ :div {:class "bg-stone-50 pl-4 py-2 border-l-3 border-sky-500"} (str (keys props)))
#+end_uix

